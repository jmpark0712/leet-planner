<!DOCTYPE html>
<html lang="ko" data-theme="leet-red">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="LEET 플래너">
  <meta name="theme-color" content="#C62828">
  <title>LEET 플래너</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.svg">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="app">
    <main id="main-content">

      <!-- ===== TODAY VIEW ===== -->
      <section id="view-today" class="view active">
        <!-- Header: D-day + Completion -->
        <div class="today-header">
          <div class="dday" id="dday-display">D-0</div>
          <div class="completion-wrapper">
            <div class="completion-rate" id="completion-rate">0%</div>
            <div class="growth-stage">
              <span class="growth-icon" id="growth-icon">🌰</span>
              <span id="growth-label">씨앗</span>
            </div>
          </div>
        </div>

        <!-- Timer -->
        <div class="card timer-section">
          <div class="character-container" id="character-container">
            <div class="character-body"></div>
            <div class="character-face">
              <div class="eye eye-left"></div>
              <div class="eye eye-right"></div>
              <div class="cheeks cheek-left"></div>
              <div class="cheeks cheek-right"></div>
              <div class="mouth"></div>
            </div>
            <div class="sweat sweat-1"></div>
            <div class="sweat sweat-2"></div>
            <div class="zzz">Z z z</div>
            <span class="sparkle sparkle-1">✨</span>
            <span class="sparkle sparkle-2">⭐</span>
            <span class="sparkle sparkle-3">✨</span>
          </div>
          <div class="timer-display" id="timer-display">06:00:00</div>
          <div class="timer-controls" id="timer-controls">
            <!-- Buttons injected by timer.js -->
          </div>
          <div class="timer-message" id="timer-message">
            수고하셨습니다! 오늘도 열심히 공부했어요! 🎉
          </div>
        </div>

        <!-- Today's Tasks -->
        <div class="tasks-section">
          <div class="section-title">오늘의 할 일</div>
          <div class="task-list" id="today-tasks">
            <!-- Generated by planner -->
          </div>
        </div>
      </section>

      <!-- ===== WEEKLY VIEW ===== -->
      <section id="view-weekly" class="view">
        <div class="view-header">
          <h1>주간 계획</h1>
          <div class="week-selector">
            <button id="prev-week">←</button>
            <span class="week-label" id="week-label"></span>
            <button id="next-week">→</button>
          </div>
        </div>

        <div class="weekly-goals">
          <div class="goal-card">
            <div class="goal-label">복습률</div>
            <div class="goal-value" id="weekly-review-rate">0%</div>
          </div>
          <div class="goal-card">
            <div class="goal-label">재풀이률</div>
            <div class="goal-value" id="weekly-resolve-rate">0%</div>
          </div>
        </div>

        <div class="weekly-days" id="weekly-days">
          <!-- 7 day rows generated by app -->
        </div>

        <button class="primary-btn" id="generate-week-btn">다음 주 계획 생성</button>
      </section>

      <!-- ===== MONTHLY VIEW ===== -->
      <section id="view-monthly" class="view">
        <div class="view-header">
          <h1>월간 로드맵</h1>
        </div>

        <div class="section-title">단계 로드맵</div>
        <div class="phase-timeline" id="phase-timeline">
          <!-- Phase cards generated by app -->
        </div>

        <div class="monthly-milestones">
          <div class="section-title">월간 마일스톤</div>
          <div id="milestones-list">
            <!-- Generated by app -->
          </div>
        </div>

        <div class="subject-ratio">
          <div class="section-title">과목 비율</div>
          <div class="ratio-bar" id="monthly-ratio-bar">
            <!-- Generated by app -->
          </div>
          <div class="ratio-labels">
            <span id="ratio-label-lang">언어이해 50%</span>
            <span id="ratio-label-logic">추리논증 50%</span>
          </div>
        </div>
      </section>

      <!-- ===== RECORDS VIEW ===== -->
      <section id="view-records" class="view">
        <div class="view-header">
          <h1>기록 · 분석</h1>
        </div>

        <div class="tab-bar">
          <button class="tab-btn active" data-tab="log">기록</button>
          <button class="tab-btn" data-tab="analysis">분석</button>
        </div>

        <!-- Log Tab -->
        <div id="tab-log" class="tab-content active">
          <button class="primary-btn" id="add-log-btn">기록 추가</button>
          <div class="log-list" id="log-list">
            <!-- Log entries -->
          </div>
        </div>

        <!-- Analysis Tab -->
        <div id="tab-analysis" class="tab-content">
          <div class="analysis-section">
            <h2>주요 오답 원인</h2>
            <div class="reason-bar-container" id="mistake-reasons">
              <!-- Generated by analysis -->
            </div>
          </div>

          <div class="analysis-section">
            <h2>취약 과목</h2>
            <div class="reason-bar-container" id="weak-subjects">
              <!-- Generated by analysis -->
            </div>
          </div>

          <div class="analysis-section">
            <h2>재풀이 대기 목록</h2>
            <div class="resolve-list" id="resolve-list">
              <!-- Generated by analysis -->
            </div>
          </div>
        </div>
      </section>

      <!-- ===== SETTINGS VIEW ===== -->
      <section id="view-settings" class="view">
        <div class="view-header">
          <h1>설정</h1>
        </div>

        <div class="settings-list">
          <div class="setting-item">
            <span class="setting-label">시험일</span>
            <div class="setting-value">
              <input type="date" class="setting-input" id="setting-exam-date" value="2026-07-19">
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">일일 학습 시간</span>
            <div class="setting-value">
              <input type="number" class="setting-input" id="setting-daily-hours" min="1" max="16" value="6">
              <span class="setting-unit">시간</span>
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">언어 : 추리 비율</span>
            <div class="setting-value">
              <div class="ratio-slider-container">
                <input type="range" class="ratio-slider" id="setting-ratio" min="10" max="90" value="50">
                <span class="ratio-value" id="setting-ratio-label">50:50</span>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">타이머 시간</span>
            <div class="setting-value">
              <input type="number" class="setting-input" id="setting-timer-hours" min="1" max="16" value="6">
              <span class="setting-unit">시간</span>
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">캐릭터 애니메이션</span>
            <div class="setting-value">
              <div class="toggle on" id="setting-animation"></div>
            </div>
          </div>
        </div>

        <div class="theme-section">
          <h2>테마</h2>
          <div class="theme-grid" id="theme-grid">
            <div class="theme-option selected" data-theme="leet-red">
              <div class="theme-preview" style="background: linear-gradient(135deg, #C62828, #EF5350);"></div>
              <div class="theme-name">LEET 레드</div>
            </div>
            <div class="theme-option" data-theme="calm-blue">
              <div class="theme-preview" style="background: linear-gradient(135deg, #1565C0, #42A5F5);"></div>
              <div class="theme-name">차분한 블루</div>
            </div>
            <div class="theme-option" data-theme="forest-green">
              <div class="theme-preview" style="background: linear-gradient(135deg, #2E7D32, #66BB6A);"></div>
              <div class="theme-name">포레스트 그린</div>
            </div>
            <div class="theme-option" data-theme="charcoal-dark">
              <div class="theme-preview" style="background: linear-gradient(135deg, #1A1A2E, #546E7A);"></div>
              <div class="theme-name">차콜 다크</div>
            </div>
            <div class="theme-option" data-theme="warm-sand">
              <div class="theme-preview" style="background: linear-gradient(135deg, #8D6E63, #FFAB91);"></div>
              <div class="theme-name">웜 샌드</div>
            </div>
          </div>
        </div>
      </section>

    </main>

    <!-- Bottom Navigation -->
    <nav id="bottom-nav">
      <button class="active" data-view="today">
        <span class="nav-icon">📋</span>
        <span>오늘</span>
      </button>
      <button data-view="weekly">
        <span class="nav-icon">📅</span>
        <span>주간</span>
      </button>
      <button data-view="monthly">
        <span class="nav-icon">🗓️</span>
        <span>월간</span>
      </button>
      <button data-view="records">
        <span class="nav-icon">📝</span>
        <span>기록</span>
      </button>
      <button data-view="settings">
        <span class="nav-icon">⚙️</span>
        <span>설정</span>
      </button>
    </nav>

    <!-- Log Entry Modal -->
    <div class="modal-overlay" id="log-modal">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-title">기록 추가</span>
          <button class="modal-close" id="log-modal-close">✕</button>
        </div>

        <div class="form-group">
          <label class="form-label">날짜</label>
          <input type="date" class="form-input" id="log-date">
        </div>

        <div class="form-group">
          <label class="form-label">과목</label>
          <div class="form-radio-group" id="log-subject">
            <div class="form-radio selected" data-value="language">언어이해</div>
            <div class="form-radio" data-value="logic">추리논증</div>
            <div class="form-radio" data-value="essay">논술</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">자료 유형</label>
          <div class="form-radio-group" id="log-material">
            <div class="form-radio selected" data-value="past-exam">기출문제</div>
            <div class="form-radio" data-value="mock">모의고사</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">정답 여부</label>
          <div class="form-radio-group" id="log-correct">
            <div class="form-radio selected" data-value="true">정답</div>
            <div class="form-radio" data-value="false">오답</div>
          </div>
        </div>

        <div class="form-group" id="mistake-reason-group" style="display:none;">
          <label class="form-label">오답 원인</label>
          <div class="form-checkbox-group" id="log-reason">
            <div class="form-chip" data-value="misread">조건 오독</div>
            <div class="form-chip" data-value="missing-evidence">근거 누락</div>
            <div class="form-chip" data-value="comparison-fail">선지 비교 실패</div>
            <div class="form-chip" data-value="time-pressure">시간 부족</div>
            <div class="form-chip" data-value="guess">찍기</div>
          </div>
        </div>

        <button class="primary-btn" id="log-save-btn" style="margin-top: 8px;">저장</button>
      </div>
    </div>

  </div>

  <script src="js/storage.js"></script>
  <script src="js/timer.js"></script>
  <script src="js/planner.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
