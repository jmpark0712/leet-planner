<!DOCTYPE html>
<html lang="ko" data-theme="red">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="LEET 플래너">
  <meta name="theme-color" content="#C62828">
  <title>LEET 플래너</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.svg">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="app">
    <main id="main-content">

      <!-- ===== TODAY VIEW ===== -->
      <section id="view-today" class="view active">
        <!-- Top Summary Card: D-day + Timer + Progress in one card -->
        <div class="card top-summary-card">
          <div class="summary-row">
            <div class="dday" id="dday-display">D-0</div>
            <div class="progress-wrapper">
              <div class="progress-rate" id="progress-rate">0%</div>
              <div class="progress-label">전체 진행률</div>
            </div>
          </div>

          <div class="timer-display" id="timer-display">06:00:00</div>
          <div class="timer-controls" id="timer-controls">
            <!-- Buttons injected by timer.js -->
          </div>
          <div class="timer-message" id="timer-message">
            수고하셨습니다! 오늘도 열심히 공부했어요!
          </div>

          <!-- Completion Counts -->
          <div class="completion-counts">
            <div class="count-badge">
              <span class="count-badge-label">오늘</span>
              <span class="count-badge-value" id="count-daily">0/0</span>
            </div>
            <div class="count-badge">
              <span class="count-badge-label">이번 주</span>
              <span class="count-badge-value" id="count-weekly">0/0</span>
            </div>
            <div class="count-badge">
              <span class="count-badge-label">이번 달</span>
              <span class="count-badge-value" id="count-monthly">0/0</span>
            </div>
          </div>
        </div>

        <!-- Today's Tasks -->
        <div class="tasks-section">
          <div class="section-title">오늘의 할 일</div>
          <div class="task-list" id="today-tasks">
            <!-- Generated by planner -->
          </div>
          <button class="add-task-btn" id="add-task-btn">+ 할 일 추가</button>
        </div>
      </section>

      <!-- ===== WEEKLY VIEW ===== -->
      <section id="view-weekly" class="view">
        <div class="view-header">
          <h1>주간 계획</h1>
          <div class="week-selector">
            <button id="prev-week">←</button>
            <span class="week-label" id="week-label"></span>
            <button id="next-week">→</button>
          </div>
        </div>

        <div class="weekly-goals">
          <div class="goal-card">
            <div class="goal-label">복습률</div>
            <div class="goal-value" id="weekly-review-rate">0%</div>
          </div>
          <div class="goal-card">
            <div class="goal-label">재풀이률</div>
            <div class="goal-value" id="weekly-resolve-rate">0%</div>
          </div>
          <div class="goal-card">
            <div class="goal-label">주간 완료</div>
            <div class="goal-value" id="weekly-completion-count">0/0</div>
          </div>
        </div>

        <div class="weekly-days" id="weekly-days">
          <!-- 7 day rows generated by app -->
        </div>

        <button class="primary-btn" id="generate-week-btn">다음 주 계획 생성</button>
      </section>

      <!-- ===== MONTHLY VIEW ===== -->
      <section id="view-monthly" class="view">
        <div class="view-header">
          <h1>월간 로드맵</h1>
        </div>

        <div class="monthly-counts">
          <div class="monthly-count-card">
            <div class="monthly-count-label">이번 달 완료</div>
            <div class="monthly-count-value" id="monthly-completion-count">0/0</div>
          </div>
        </div>

        <div class="section-title">단계 로드맵</div>
        <div class="phase-timeline" id="phase-timeline">
          <!-- Phase cards generated by app -->
        </div>

        <div class="monthly-milestones">
          <div class="section-title">월간 마일스톤</div>
          <div id="milestones-list">
            <!-- Generated by app -->
          </div>
        </div>

        <div class="subject-ratio">
          <div class="section-title">과목 비율</div>
          <div class="ratio-bar" id="monthly-ratio-bar">
            <!-- Generated by app -->
          </div>
          <div class="ratio-labels">
            <span id="ratio-label-lang">언어이해 50%</span>
            <span id="ratio-label-logic">추리논증 50%</span>
          </div>
        </div>
      </section>

      <!-- ===== RECORDS VIEW ===== -->
      <section id="view-records" class="view">
        <div class="view-header">
          <h1>기록 · 분석</h1>
        </div>

        <div class="tab-bar">
          <button class="tab-btn active" data-tab="log">기록</button>
          <button class="tab-btn" data-tab="analysis">분석</button>
        </div>

        <!-- Log Tab -->
        <div id="tab-log" class="tab-content active">
          <button class="primary-btn" id="add-log-btn">기록 추가</button>
          <div class="log-list" id="log-list">
            <!-- Log entries -->
          </div>
        </div>

        <!-- Analysis Tab -->
        <div id="tab-analysis" class="tab-content">
          <div class="analysis-section">
            <h2>주요 오답 원인</h2>
            <div class="reason-bar-container" id="mistake-reasons">
              <!-- Generated by analysis -->
            </div>
          </div>

          <div class="analysis-section">
            <h2>취약 과목</h2>
            <div class="reason-bar-container" id="weak-subjects">
              <!-- Generated by analysis -->
            </div>
          </div>

          <div class="analysis-section">
            <h2>재풀이 대기 목록</h2>
            <div class="resolve-list" id="resolve-list">
              <!-- Generated by analysis -->
            </div>
          </div>
        </div>
      </section>

      <!-- ===== SETTINGS VIEW ===== -->
      <section id="view-settings" class="view">
        <div class="view-header">
          <h1>설정</h1>
        </div>

        <div class="settings-list">
          <div class="setting-item">
            <span class="setting-label">시험일</span>
            <div class="setting-value">
              <input type="date" class="setting-input" id="setting-exam-date" value="2026-07-19">
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">일일 학습 시간</span>
            <div class="setting-value">
              <input type="number" class="setting-input" id="setting-daily-hours" min="1" max="16" value="6">
              <span class="setting-unit">시간</span>
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">언어 : 추리 비율</span>
            <div class="setting-value">
              <div class="ratio-slider-container">
                <input type="range" class="ratio-slider" id="setting-ratio" min="10" max="90" value="50">
                <span class="ratio-value" id="setting-ratio-label">50:50</span>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <span class="setting-label">타이머 시간</span>
            <div class="setting-value">
              <input type="number" class="setting-input" id="setting-timer-hours" min="1" max="16" value="6">
              <span class="setting-unit">시간</span>
            </div>
          </div>
        </div>

        <div class="theme-section">
          <h2>테마</h2>
          <div class="theme-grid" id="theme-grid">
            <div class="theme-option selected" data-theme="red">
              <div class="theme-preview" style="background: linear-gradient(135deg, #C62828, #EF5350);"></div>
              <div class="theme-name">Red</div>
            </div>
            <div class="theme-option" data-theme="blue">
              <div class="theme-preview" style="background: linear-gradient(135deg, #1565C0, #42A5F5);"></div>
              <div class="theme-name">Blue</div>
            </div>
            <div class="theme-option" data-theme="green">
              <div class="theme-preview" style="background: linear-gradient(135deg, #2E7D32, #66BB6A);"></div>
              <div class="theme-name">Green</div>
            </div>
            <div class="theme-option" data-theme="dark">
              <div class="theme-preview" style="background: linear-gradient(135deg, #1A1A2E, #546E7A);"></div>
              <div class="theme-name">Dark</div>
            </div>
            <div class="theme-option" data-theme="sand">
              <div class="theme-preview" style="background: linear-gradient(135deg, #8D6E63, #FFAB91);"></div>
              <div class="theme-name">Sand</div>
            </div>
            <div class="theme-option" data-theme="pink">
              <div class="theme-preview" style="background: linear-gradient(135deg, #AD1457, #EC407A);"></div>
              <div class="theme-name">Pink</div>
            </div>
          </div>
        </div>

        <div class="danger-section">
          <button class="danger-btn" id="reset-data-btn">모든 데이터 초기화</button>
        </div>
      </section>

    </main>

    <!-- Bottom Navigation -->
    <nav id="bottom-nav">
      <button class="active" data-view="today">
        <span class="nav-icon">📋</span>
        <span>오늘</span>
      </button>
      <button data-view="weekly">
        <span class="nav-icon">📅</span>
        <span>주간</span>
      </button>
      <button data-view="monthly">
        <span class="nav-icon">🗓️</span>
        <span>월간</span>
      </button>
      <button data-view="records">
        <span class="nav-icon">📝</span>
        <span>기록</span>
      </button>
      <button data-view="settings">
        <span class="nav-icon">⚙️</span>
        <span>설정</span>
      </button>
    </nav>

    <!-- Log Entry Modal -->
    <div class="modal-overlay" id="log-modal">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-title">기록 추가</span>
          <button class="modal-close" id="log-modal-close">✕</button>
        </div>

        <div class="form-group">
          <label class="form-label">날짜</label>
          <input type="date" class="form-input" id="log-date">
        </div>

        <div class="form-group">
          <label class="form-label">과목</label>
          <div class="form-radio-group" id="log-subject">
            <div class="form-radio selected" data-value="language">언어이해</div>
            <div class="form-radio" data-value="logic">추리논증</div>
            <div class="form-radio" data-value="essay">논술</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">자료 유형</label>
          <div class="form-radio-group" id="log-material">
            <div class="form-radio selected" data-value="past-exam">기출문제</div>
            <div class="form-radio" data-value="mock">모의고사</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">정답 여부</label>
          <div class="form-radio-group" id="log-correct">
            <div class="form-radio selected" data-value="true">정답</div>
            <div class="form-radio" data-value="false">오답</div>
          </div>
        </div>

        <div class="form-group" id="mistake-reason-group" style="display:none;">
          <label class="form-label">오답 원인</label>
          <div class="form-checkbox-group" id="log-reason">
            <div class="form-chip" data-value="misread">조건 오독</div>
            <div class="form-chip" data-value="missing-evidence">근거 누락</div>
            <div class="form-chip" data-value="comparison-fail">선지 비교 실패</div>
            <div class="form-chip" data-value="time-pressure">시간 부족</div>
            <div class="form-chip" data-value="guess">찍기</div>
          </div>
        </div>

        <button class="primary-btn" id="log-save-btn" style="margin-top: 8px;">저장</button>
      </div>
    </div>

    <!-- Task Edit Modal -->
    <div class="modal-overlay" id="task-modal">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-title" id="task-modal-title">할 일 추가</span>
          <button class="modal-close" id="task-modal-close">✕</button>
        </div>

        <div class="form-group">
          <label class="form-label">내용</label>
          <input type="text" class="form-input" id="task-edit-title" placeholder="할 일 내용을 입력하세요">
        </div>

        <div class="form-group">
          <label class="form-label">카테고리</label>
          <div class="form-radio-group" id="task-edit-category" style="flex-wrap: wrap;">
            <div class="form-radio selected" data-value="language">언어이해</div>
            <div class="form-radio" data-value="logic">추리논증</div>
            <div class="form-radio" data-value="essay">논술</div>
            <div class="form-radio" data-value="review">복습</div>
            <div class="form-radio" data-value="resolve">재풀이</div>
            <div class="form-radio" data-value="mock">모의고사</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">예상 시간 (분, 선택)</label>
          <input type="number" class="form-input" id="task-edit-duration" min="0" max="600" placeholder="예: 60">
        </div>

        <input type="hidden" id="task-edit-id">
        <input type="hidden" id="task-edit-date">

        <button class="primary-btn" id="task-save-btn" style="margin-top: 8px;">저장</button>
      </div>
    </div>

    <!-- Confirm Dialog -->
    <div class="confirm-overlay" id="confirm-dialog">
      <div class="confirm-dialog">
        <div class="confirm-title" id="confirm-title">확인</div>
        <div class="confirm-msg" id="confirm-msg">정말 실행하시겠습니까?</div>
        <div class="confirm-actions">
          <button class="confirm-cancel" id="confirm-cancel">취소</button>
          <button class="confirm-ok" id="confirm-ok">확인</button>
        </div>
      </div>
    </div>

  </div>

  <script src="js/storage.js"></script>
  <script src="js/timer.js"></script>
  <script src="js/planner.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
